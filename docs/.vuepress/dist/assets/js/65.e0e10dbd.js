(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{544:function(a,t,n){"use strict";n.r(t);var o=n(20),s=Object(o.a)({},(function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("p",[a._v("变量声明是所有的编程语言中最基础部分之一。然而，JavaScript 有一个怪异点，称之为变量提升（hositing），这个能够让一个看上去无关紧要的声明变成一个小bug。")]),a._v(" "),n("h2",{attrs:{id:"一、变量提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、变量提升"}},[a._v("#")]),a._v(" 一、变量提升")]),a._v(" "),n("p",[a._v("在当前上下文遇到一个变量，如果不是私有的，则向上级上下文中查找一直找到全局上下文为止， 如果全局上下文中也没有：")]),a._v(" "),n("ol",[n("li",[a._v("如果是获取变量的值，则直接报错")])]),a._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/7/16/17357a62d5c6fac5?w=949&h=337&f=png&s=26266",alt:""}}),a._v("\n2. 如果是设置变量的值，则相当于给window(GO)设置一个属性")]),a._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/7/16/17357a604d2fdb8a?w=855&h=287&f=png&s=24127",alt:""}})]),a._v(" "),n("h2",{attrs:{id:"二、window全局对象和全局变量的关系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、window全局对象和全局变量的关系"}},[a._v("#")]),a._v(" 二、window全局对象和全局变量的关系")]),a._v(" "),n("h4",{attrs:{id:"_1、两者关系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、两者关系"}},[a._v("#")]),a._v(" 1、两者关系")]),a._v(" "),n("p",[a._v("两者之间存在映射关系（创建一个全局变量，也相当于给window设置一个属性）")]),a._v(" "),n("h4",{attrs:{id:"_2、两者优先级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、两者优先级"}},[a._v("#")]),a._v(" 2、两者优先级")]),a._v(" "),n("p",[a._v("在全局上下文代码执行的时候，遇到一个变量，首先看是否为全局变量（如果是操作全局变量，【var/function声明的会给window也设置一份】），不是全局变量则继续看是否为GO的属性（如果是相当于省略window），如果也不是则按照没有声明这个变量的错误处理")]),a._v(" "),n("h4",{attrs:{id:"_3、window-a为什么是undefined"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、window-a为什么是undefined"}},[a._v("#")]),a._v(" 3、window.a为什么是undefined？")]),a._v(" "),n("p",[a._v("直接输出window.a是对象的成员访问，哪怕没有属性a，属性值是undefined，也不会报错")]),a._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/7/16/17357a786535ffcf?w=995&h=326&f=png&s=21210",alt:""}})]),a._v(" "),n("h2",{attrs:{id:"三、变量提升练习题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、变量提升练习题"}},[a._v("#")]),a._v(" 三、变量提升练习题")]),a._v(" "),n("p",[a._v("建议重新读一遍变量提升的概念，再做这三道题。")]),a._v(" "),n("h4",{attrs:{id:"第一题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一题"}},[a._v("#")]),a._v(" 第一题")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("console.log(a); \nvar a=12; \nfunction fn(){\n    console.log(a); \n    var a=13;   \n}\nfn();   \nconsole.log(a);\n")])])]),n("h4",{attrs:{id:"第二题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二题"}},[a._v("#")]),a._v(" 第二题")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("console.log(a); \nvar a=12;\nfunction fn(){\n    console.log(a);\n    a=13;\n}\nfn();\nconsole.log(a);\n")])])]),n("h4",{attrs:{id:"第三题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三题"}},[a._v("#")]),a._v(" 第三题")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("console.log(a);\na=12;\nfunction fn(){\n    console.log(a);\n    a=13;   \n}\nfn();\nconsole.log(a);\n")])])]),n("h4",{attrs:{id:"第四题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四题"}},[a._v("#")]),a._v(" 第四题")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("var foo='hello'; \n(function(foo){\n   console.log(foo);\n   var foo=foo||'world';\n   console.log(foo);\n})(foo);\nconsole.log(foo);\n")])])]),n("p",[a._v("解析：")]),a._v(" "),n("h5",{attrs:{id:"_1、自执行函数执行-创建一个函数-并且立即把这个函数执行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、自执行函数执行-创建一个函数-并且立即把这个函数执行"}},[a._v("#")]),a._v(" 1、自执行函数执行：创建一个函数，并且立即把这个函数执行")]),a._v(" "),n("h5",{attrs:{id:"_2、把全局的foo的值-hello-传递给私有上下文中的形参"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、把全局的foo的值-hello-传递给私有上下文中的形参"}},[a._v("#")]),a._v(" 2、把全局的foo的值'hello'传递给私有上下文中的形参")]),a._v(" "),n("h5",{attrs:{id:"_3、函数执行先形参赋值-再变量提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、函数执行先形参赋值-再变量提升"}},[a._v("#")]),a._v(" 3、函数执行先形参赋值，再变量提升")]),a._v(" "),n("h5",{attrs:{id:"_4、foo已经存在-不重复声明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、foo已经存在-不重复声明"}},[a._v("#")]),a._v(" 4、foo已经存在，==不重复声明==")]),a._v(" "),n("h2",{attrs:{id:"四、块级作用域中的变量提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、块级作用域中的变量提升"}},[a._v("#")]),a._v(" 四、块级作用域中的变量提升")]),a._v(" "),n("h4",{attrs:{id:"_1、块级作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、块级作用域"}},[a._v("#")]),a._v(" 1、块级作用域")]),a._v(" "),n("p",[a._v("代码在执行的时候遇到大括号{}（排除函数、对象的），在看到{}中有let、const、function才会把其当做块级作用域。")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("if(true) {\n    var a = 1\n}\n// 不是块级作用域\n\nif(true) {\n    let a = 1\n}\n// 是块级作用域\n\nif(true) {\n    function a(){}\n}\n// 是块级作用域\n")])])]),n("h4",{attrs:{id:"_2、函数在块级作用域中的变量提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、函数在块级作用域中的变量提升"}},[a._v("#")]),a._v(" 2、函数在块级作用域中的变量提升")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("console.log(foo)\n{\n    console.log(foo)\n    function foo() {}\n    foo = 1;\n    console.log(foo)\n}\nconsole.log(foo);\n\n// undefined  function 1 function\n")])])]),n("p",[a._v("解析：")]),a._v(" "),n("h5",{attrs:{id:"_1、-里面有function所以是块级作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、-里面有function所以是块级作用域"}},[a._v("#")]),a._v(" 1、{}里面有function所以是块级作用域")]),a._v(" "),n("h5",{attrs:{id:"_2、函数在块级作用域中没有-所以会变量提升-所以第二个打印function"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、函数在块级作用域中没有-所以会变量提升-所以第二个打印function"}},[a._v("#")]),a._v(" 2、函数在块级作用域中没有，所以会变量提升（所以第二个打印function）")]),a._v(" "),n("h5",{attrs:{id:"_3、-重点-函数出现在块级作用域中-变量提升阶段-只声明不定义-所以第一个undefined"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、-重点-函数出现在块级作用域中-变量提升阶段-只声明不定义-所以第一个undefined"}},[a._v("#")]),a._v(" 3、==重点== 函数出现在块级作用域中，变量提升阶段，只声明不定义（所以第一个undefined）")]),a._v(" "),n("h5",{attrs:{id:"_4、-重点-在代码执行的时候浏览器会把function-foo-之前的操作-不仅认为是私有的-还会给全局映射一份-之后对foo的操作就认为是私有的了-所以后两个分别1、function"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、-重点-在代码执行的时候浏览器会把function-foo-之前的操作-不仅认为是私有的-还会给全局映射一份-之后对foo的操作就认为是私有的了-所以后两个分别1、function"}},[a._v("#")]),a._v(" 4、==重点== 在代码执行的时候浏览器会把function foo()之前的操作，不仅认为是私有的，还会给全局映射一份，之后对foo的操作就认为是私有的了（所以后两个分别1、function）")]),a._v(" "),n("h2",{attrs:{id:"五、块级作用域变量提升练习题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、块级作用域变量提升练习题"}},[a._v("#")]),a._v(" 五、块级作用域变量提升练习题")]),a._v(" "),n("p",[a._v("建议把上面的四句话多读几遍再做")]),a._v(" "),n("h4",{attrs:{id:"第一题-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一题-2"}},[a._v("#")]),a._v(" 第一题")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("console.log(foo);\n{\n    console.log(foo);\n    function foo() {} // 此时之前对FOO的操作不会映射，等待最后一次再处理\n    foo = 1;\n    function foo() {}\n    console.log(foo);\n}\nconsole.log(foo);   \n")])])]),n("h4",{attrs:{id:"第二题-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二题-2"}},[a._v("#")]),a._v(" 第二题")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("console.log(foo);\n{\n    function foo() {}\n    foo = 1;\n    function foo() {}\n    foo = 2;\n}\nconsole.log(foo);\n")])])]),n("h2",{attrs:{id:"六、匿名函数具名化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六、匿名函数具名化"}},[a._v("#")]),a._v(" 六、匿名函数具名化")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v(" var b = 10;\n(function () {\n\t// b是EC(G)中的\n\tb = 20;\n\tconsole.log(b);\n})();\nconsole.log(b); \n\n// 20 20 \n\n\nvar b = 10;\n(function b() {\n\tb = 20;\n\tconsole.log(b); //=>函数\n})();\nconsole.log(b); //=>10 \n\nvar b = 10;\n(function b() {\n\tvar b = 20;\n\tconsole.log(b); //=>20\n})();\nconsole.log(b); //=>10  \n")])])]),n("h4",{attrs:{id:"匿名函数具名化-设置了名字"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#匿名函数具名化-设置了名字"}},[a._v("#")]),a._v(" 匿名函数具名化(设置了名字):")]),a._v(" "),n("ul",[n("li",[n("p",[a._v("1.设置的名字只能在函数内部使用,外部是无法使用的（基于这种方式代替严格模式下不兼容的arguments.callee，并以此实现递归算法[自己调用自己自]）")])]),a._v(" "),n("li",[n("p",[a._v("2.在函数内部去修改这个名字值，默认是不能修改的，代表的依然是函数本身（除非这个函数名字在函数体中被重新声明过，重新声明后，一起都按照重新声明的为主）")])])]),a._v(" "),n("h4",{attrs:{id:"练习题答案欢迎留言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#练习题答案欢迎留言"}},[a._v("#")]),a._v(" 练习题答案欢迎留言！")]),a._v(" "),n("p",[a._v("公众号地址，欢迎关注！")]),a._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/7/16/17357b700e8534af?w=344&h=344&f=jpeg&s=8150",alt:""}})])])}),[],!1,null,null,null);t.default=s.exports}}]);